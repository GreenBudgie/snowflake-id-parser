<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SOLAR Snowflake ID Parser</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>
<h1>SOLAR Snowflake ID parser</h1>
<label for="snowflake_id_input"></label>
<input type="number" name="snowflakeId" id="snowflake_id_input">
<button type="button" id="parse_button">Parse</button>
<table id="result_table">
    <tr>
        <td>Date and Time</td>
        <td><span class="result_date_time"></span></td>
    </tr>
    <tr>
        <td>Node Number</td>
        <td><span class="node_number_decimal"></span></td>
    </tr>
    <tr>
        <td>Sequence Number</td>
        <td><span class="sequence_number_decimal"></span></td>
    </tr>
</table>

<dl id="detailed_info">
    <dt>1. Convert snowflake ID to binary representation</dt>
    <dd>
        <span class="snowflake_id_decimal"></span>
        <span> -> </span>
        <span class="snowflake_id_binary"></span>
    </dd>

    <dt>2. Add leading zeros to binary ID representation</dt>
    <dd>
        <p>SOLAR snowflake IDs always contain 59 bits.
            We have to add zeros to the start of the number for easier parsing:
        </p>
        <span class="full_snowflake_id_binary"></span>
    </dd>

    <dt>3. Split the binary representation into three parts</dt>
    <dd>
        <table class="inner-table">
            <tr>
                <td>Timestamp - first 41 bits</td>
                <td><span class="timestamp_binary"></span></td>
            </tr>
            <tr>
                <td>Node Number - 10 bits after timestamp</td>
                <td><span class="node_number_binary"></span></td>
            </tr>
            <tr>
                <td>Sequence Number - last 8 bits</td>
                <td><span class="sequence_number_binary"></span></td>
            </tr>
        </table>
    </dd>

    <dt>4. Convert timestamp to decimal representation and then to date</dt>
    <dd>
        <span class="timestamp_binary"></span>
        <span> -> </span>
        <span class="timestamp_decimal"></span>

        <p>Resulting number is a number of milliseconds that passed since April 1st, 2020 2:38:20 AM.
            Its timestamp is 1585710000000 (milliseconds since January 1st, 1970).
            To get the resulting number of milliseconds that passed since January 1st, 1970,
            we have to sum these two timestamps:</p>

        <span class="timestamp_decimal"></span>
        <span>+</span>
        <span>1585710000000</span>
        <span>=</span>
        <span class="result_timestamp"></span>

        <p>Then we can convert resulting timestamp to date and time: </p>
        <span class="result_date_time"></span>
    </dd>

    <dt>5. Convert node number to decimal representation</dt>
    <dd>
        <span class="node_number_binary"></span>
        <span> -> </span>
        <span class="node_number_decimal"></span>
    </dd>

    <dt>6. Convert sequence number to decimal representation</dt>
    <dd>
        <span class="sequence_number_binary"></span>
        <span> -> </span>
        <span class="sequence_number_decimal"></span>
    </dd>
</dl>
<script src="script.js"></script>
</body>
</html>